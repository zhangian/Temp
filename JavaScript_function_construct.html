<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>javascript function construct chapter</title>
	<script src="meJs/vQuery.js" type="text/javascript"></script>
	<script type="text/javascript">
	'use strict';
		var scope='global scope';

		function constructFunction(){
			var scope ='local script';
			return new Function('return scope');
		}

		console.log(constructFunction()());

		var reg=new RegExp();

		console.log(typeof reg);

		var data=[1,1,2,3,5,5];

		var total=0;//
		for(var i=0; i<data.length; i++) total+=data[i];
		var meanV=total/data.length;

		total=0;
		for(var i=0; i<data.length; i++) {
			var devaidation=data[i]-meanV;
			total+=devaidation*devaidation;
		}

		var stddev=Math.sqrt(total/(data.length-1));

		console.log( meanV , stddev);

		var sum=function(x, y){ return x+y; };
		var square=function(x){ return x*x; };

		var date=[1,1,2,3,5,5];
		var mean=data.reduce(sum)/date.length;
		var devaidate=date.map(function(x){ return x-mean; });
		var stdde=Math.sqrt(devaidate.map(square).reduce(sum)/(date.length-1));

		console.log(mean , stdde)

		var odd=not(even);
		console.log(odd);
		console.log([1,1,3,5,5].every(odd));

		var increment=function(x){ return x+1; };
		var incrementer=mapper(increment);
		console.log(incrementer)

		console.log(incrementer([1,2,3]))

		var square=function(x){ return x*x; };
		var sum=function(x, y){ return x+y; };

		var squareofsum=compose(square, sum);

		console.log(squareofsum(2,3));

		var f=function(x, y, z){ return x*(y-z); };

		console.log(partialLeft(f,2)(3,4));

		console.log(partialRight(f,2)(3,4));
		console.log(partial(f, undefined, 2)(3,4));


		function range(from, to){
			var r=inherit(range.methods);
			r.from=from;
			r.to=to;
			return r;
		}

		range.methods={
			includes:function(x){
				return this.from <= x && x<this.to;},
			foreach:function(f){
				for(var x=Math.ceil(this.from); x<=this.to; x++) f(x); },
			toString:function(){ return '('+this.from+'...'+ this.to+')'}
		};

		var r=range(1, 3);

		console.log(r);
		console.log(r.includes(2));
		r.foreach(function(x){ document.write(x)})

		function Range(from, to){
			this.from=from;
			this.to=to;
		}

		Range.prototype={
			includes:function(x){ return this.from<=x && x<=to; },
			foreach:function(f){ for(var x=Math.ceil(this.from); x<=this.to; x++) f(x); },
			toString:function(){ return '('+ this.form + '...' + this.to +')';}
		};

		var b=new Range(1,3);

		var y=b;

		console.log(b==y);
		var q=r;
		console.log(r==q);

		var mc=new Complex(2, 3);

		console.log(mc);
		
		var d=new Complex(mc.i, mc.r);

		console.log(d);
	</script>

</head>

<body>

</body>

</html>